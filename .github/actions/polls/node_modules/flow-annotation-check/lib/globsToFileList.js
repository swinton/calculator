'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _glob = require('glob');

var _glob2 = _interopRequireDefault(_glob);

var _core = require('./core');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function coalescePatterns(patterns, globOptions) {
  return (0, _core.flatten)(patterns.map(function (pattern) {
    return _glob2.default.sync(pattern, globOptions);
  }));
}

function globsToFileList(cwd, includePatterns, excludePatterns, options) {
  var globOptions = Object.assign({}, {
    cwd: cwd,
    cache: {},
    matchBase: true,
    absolute: true
  }, options);
  var includeFiles = coalescePatterns(includePatterns, globOptions);
  var excludeFiles = coalescePatterns(excludePatterns, globOptions);

  return includeFiles.filter(function (file) {
    return excludeFiles.indexOf(file) < 0;
  });
}

exports.default = globsToFileList;